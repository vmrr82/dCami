<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Formulario de Vehículos</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
  <header>Datos técnicos de los vehículos implicados</header>

  <nav>
    <li>Datos técnicos</li>
  </nav>

  <div class="container-grid">
    <div class="datosTecnicosVehiculos">

      <!-- ===================== VEHÍCULO A ===================== -->
      <section class="vehiculoA">
        <h2 class="titleVeh">VEHÍCULO A</h2>

        <!-- Selección modelo A -->
        <form method="POST" action="{{ url_for('index') }}">
          <label for="modelo_vehiculoA">Seleccione un modelo:</label><br><br>

          <select name="modelo_vehiculoA" id="modelo_vehiculoA" required>
            <option value="">-- Seleccione un modelo --</option>
            {% for x in listado %}
            <option value="{{ x }}" {% if x==select_modelA %}selected{% endif %}>{{ x }}</option>
            {% endfor %}
          </select>

          <input type="hidden" name="modelo_vehiculoB" value="{{ select_modelB or '' }}">

          <br><br>
          <button type="submit">Cargar Vehículo</button>
        </form>

        <hr style="margin-top: 10px;">

        <!-- Editar/guardar A -->
        <h3 id="caracter">Características:</h3>
        <form method="POST" action="{{ url_for('guardar') }}">
          <input type="hidden" name="tipo" value="A">
          <input type="hidden" name="modelo_vehiculoA" value="{{ select_modelA or '' }}">

          <div class="formMain">
            <div class="formCol">
              <label for="pesoA">Masa (Kg):</label>
              <input type="number" id="pesoA" name="peso" value="{{ resultadoA.get('peso', 0) }}" required>

              <label for="alturaA">Altura (mm):</label>
              <input type="number" id="alturaA" name="altura" value="{{ resultadoA.altura if resultadoA else 0 }}" required>

              <label for="anchuraA">Anchura (mm):</label>
              <input type="number" id="anchuraA" name="anchura" value="{{ resultadoA.anchura if resultadoA else 0 }}" required>

              <label for="longitudA">Longitud (mm):</label>
              <input type="number" id="longitudA" name="longitud" value="{{ resultadoA.longitud if resultadoA else 0 }}" required>

              <label for="batallaA">Batalla (mm):</label>
              <input type="number" id="batallaA" name="batallaA" value="{{ resultadoA.batallaA if resultadoA else 0 }}" required>

              <label for="viaAntA">Vía Ant. (mm):</label>
              <input type="number" id="viaAntA" name="viaAntA" value="{{ resultadoA.viaAntA if resultadoA else 0 }}" required>

              <label for="viaPostA">Vía Post. (mm):</label>
              <input type="number" id="viaPostA" name="viaPostA" value="{{ resultadoA.viaPostA if resultadoA else 0 }}" required>

              <label for="volAntA">Vol Ant. (mm):</label>
              <input type="number" id="volAntA" name="volAntA" value="0" required>

              <label for="volPostA">Vol Post. (mm):</label>
              <input type="number" id="volPostA" name="volPostA" value="{{ resultadoA.volPostA if resultadoA else 0 }}" required>
            </div>

            <div class="formCol">
              <h4>DISTRIBUCIÓN DE CARGA</h4>

              <div class="distribucion">
                <label style="padding-top: 1px;" for="anteriorA">Anterior:</label>
                <input type="number" id="anteriorA" name="anteriorA" value="{{ resultadoA.get('anteriorA', 0) }}" required>

                <input type="number" id="pesoAnteriorA" name="pesoAnteriorA"
                  value="{{ (resultadoA.get('peso',0) * resultadoA.get('anteriorA',0) / 100) }}" readonly>

                <label for="posteriorA">Posterior:</label>
                <input type="number" id="posteriorA" name="posteriorA" value="{{ resultadoA.get('posteriorA', 0) }}" required>

                <input type="number" id="pesoPosteriorA" name="pesoPosteriorA" value="0" readonly>
              </div>

              <button id="calcularDistribucion" type="button">Calcular</button>

              <h4 style="margin-top: 10px; margin-bottom: 10px;">CENTRO DE GRAVEDAD</h4>
              <label for="centroAnteriorA">Desde eje ant (CMFa):</label>
              <input type="number" id="centroAnteriorA" name="centroAnteriorA" value="0">

              <label for="centroFrontalA">Desde el frontal:</label>
              <input type="number" id="centroFrontalA" name="centroFrontalA" value="0">

              <button onclick="actualizarCentroFrontalA()" type="button" style="margin-top: 10px;">Calcular</button>

              <hr id="offsetLinea">

              <label for="offsetA">Offset deformación:</label>
              <input type="number" id="offsetA" name="offsetA" value="0">
            </div>
          </div>

          <button type="submit">Guardar vehículo A</button>
        </form>
      </section>

      <!-- ===================== VEHÍCULO B ===================== -->
      <section class="vehiculoB">
        <h2 class="titleVeh">VEHÍCULO B</h2>

        <!-- Selección modelo B -->
        <form method="POST" action="{{ url_for('index') }}">
          <label for="modelo_vehiculoB">Seleccione un modelo:</label><br><br>

          <select name="modelo_vehiculoB" id="modelo_vehiculoB" required>
            <option value="">-- Seleccione un modelo --</option>
            {% for x in listado %}
            <option value="{{ x }}" {% if x==select_modelB %}selected{% endif %}>{{ x }}</option>
            {% endfor %}
          </select>

          <input type="hidden" name="modelo_vehiculoA" value="{{ select_modelA or '' }}">

          <br><br>
          <button type="submit">Cargar Vehículo</button>
        </form>

        <hr style="margin-top: 10px;">

        <h3 id="caracter">Características:</h3>
        <form method="POST" action="{{ url_for('guardar') }}">
          <input type="hidden" name="tipo" value="B">
          <input type="hidden" name="modelo_vehiculoB" value="{{ select_modelB or '' }}">

          <div class="formMain">
            <div class="formCol">
              <label for="pesoB">Masa (Kg):</label>
              <input type="number" id="pesoB" name="peso" value="{{ resultadoB.peso if resultadoB else 0 }}" required>

              <label for="alturaB">Altura (mm):</label>
              <input type="number" id="alturaB" name="altura" value="{{ resultadoB.altura if resultadoB else 0 }}" required>

              <label for="anchuraB">Anchura (mm):</label>
              <input type="number" id="anchuraB" name="anchura" value="{{ resultadoB.anchura if resultadoB else 0 }}" required>

              <label for="longitudB">Longitud (mm):</label>
              <input type="number" id="longitudB" name="longitud" value="{{ resultadoB.longitud if resultadoB else 0 }}" required>

              <label for="batallaB">Batalla (mm):</label>
              <input type="number" id="batallaB" name="batalla" value="{{ resultadoB.batallaB if resultadoB else 0 }}" required>

              <label for="viaAntB">Vía Ant. (mm):</label>
              <input type="number" id="viaAntB" name="viaAntB" value="{{ resultadoB.viaAntB if resultadoB else 0 }}" required>

              <label for="viaPostB">Vía Post. (mm):</label>
              <input type="number" id="viaPostB" name="viaPostB" value="{{ resultadoB.viaPostB if resultadoB else 0 }}" required>

              <label for="volAntB">Vol. Ant. (mm):</label>
              <input type="number" id="volAntB" name="volAntB" value="0" required>

              <label for="volPostB">Vol. Post. (mm):</label>
              <input type="number" id="volPostB" name="volPostB" value="{{ resultadoB.volPostB if resultadoB else 0 }}" required>
            </div>

            <div class="formCol">
              <h4>DISTRIBUCIÓN DE CARGA</h4>

              <div class="distribucion">
                <label for="anteriorB">Anterior:</label>
                <input type="number" step="1"  id="anteriorB" name="anteriorB" value="{{ resultadoB.get('anteriorB', 0)  }}" required>

                <input type="number" id="pesoAnteriorB" name="pesoAnteriorB"
                  value="{{ (resultadoB.get('peso',0) * resultadoB.get('anteriorB',0) / 100) }}" readonly>

                <label for="posteriorB">Posterior:</label>
                <input type="number" id="posteriorB" name="posteriorB" value="{{ resultadoB.get('posteriorB', 0) }}" required>

                <input type="number" id="pesoPosteriorB" name="pesoPosteriorB" value="0" readonly>
              </div>

              <button id="calcularDistribucionB" type="button">Calcular</button>

              <h4 style="margin-top: 10px; margin-bottom: 10px;">CENTRO DE GRAVEDAD</h4>
              <label for="centroAnteriorB">Desde eje ant (CMFa):</label>
              <input type="number" id="centroAnteriorB" name="centroAnteriorB" value="0">

              <label for="centroFrontalB">Desde el frontal:</label>
              <input type="number" id="centroFrontalB" name="centroFrontalB" value="0">

              <button onclick="actualizarCentroFrontalB()" type="button" style="margin-top: 10px;">Calcular</button>

              <hr id="offsetLinea">

              <label for="offsetB">Offset deformación:</label>
              <input type="number" id="offsetB" name="offsetB" value="0">
            </div>
          </div>

          <button type="submit">Guardar vehículo B</button>
        </form>
      </section>
    </div>

    <!-- ===================== MEDIDAS DEFORMACIONES ===================== -->
    <div class="medidasDeformaciones">
      <section class="deformacionesA">
        <table class="tableDefor">
          <thead>
            <tr>
              <th style="width: 90px;"> </th>
              <th>c</th>
              <th>dc</th>
              <th>zw</th>
              <th>Área</th>
            </tr>
          </thead>
          <tbody>
            {% for i in range(1, 15) %}
            <tr>
              <td>medida {{ i }}</td>
              <td><input type="number" step="any" id="c_{{ i }}" name="c_{{ i }}"></td>
              <td><input type="number" step="any" id="dc_{{ i }}" name="dc_{{ i }}"></td>
              <td><input type="number" step="any" id="zw_{{ i }}" name="zw_{{ i }}"></td>
              <td><input type="number" step="any" id="area_{{ i }}" name="area_{{ i }}"></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>

      <section class="deformacionesB">
        <table class="tableDefor">
          <thead>
            <tr>
              <th style="width: 90px;"> </th>
              <th>c</th>
              <th>dc</th>
              <th>zw</th>
              <th>Área</th>
            </tr>
          </thead>
          <tbody>
            {% for i in range(1, 15) %}
            <tr>
              <td>medida {{ i }}</td>
              <td><input type="number" step="any" id="c2_{{ i }}" name="c2_{{ i }}"></td>
              <td><input type="number" step="any" id="dc2_{{ i }}" name="dc2_{{ i }}"></td>
              <td><input type="number" step="any" id="zw2_{{ i }}" name="zw2_{{ i }}"></td>
              <td><input type="number" step="any" id="area2_{{ i }}" name="area2_{{ i }}"></td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </section>
    </div>
  </div>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>
